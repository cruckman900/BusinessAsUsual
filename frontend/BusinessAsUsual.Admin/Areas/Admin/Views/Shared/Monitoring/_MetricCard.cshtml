@using BusinessAsUsual.Admin.Areas.Admin.Models.Monitoring
@model MetricCardModel

<div class="card p-3 shadow-sm metric-card gradient-card" data-title="@Model.Title">
    <h5>
        @await Html.PartialAsync("~/Areas/Admin/Views/Shared/Monitoring/_StatusDot.cshtml", Model.Color)
        @Model.Title
    </h5>

    <div class="mt-2">

        @* Service Metrics *@
        @if (Model.Metrics != null)
        {
            <p>Latency: @Model.Metrics.LatencyMs ms</p>
            <p>Requests: @Model.Metrics.RequestsPerMinute rpm</p>
            <p>Errors: @Model.Metrics.ErrorRate</p>
        }

        @* Service Alarms *@
        @if (Model.ServiceAlarms != null)
        {
            foreach (var alarm in Model.ServiceAlarms)
            {
                <p>@alarm.Key: @alarm.Value</p>
            }
        }

        @* Infrastructure Alarms *@
        @if (Model.InfraAlarms != null)
        {
            foreach (var alarm in Model.InfraAlarms)
            {
                <p>@alarm.Key: @alarm.Value</p>
            }
        }
    </div>

    <button class="btn btn-sm btn-outline-primary mt-2 open-detail" data-title="@Model.Title">
        View Details
    </button>
</div>