@using MudBlazor
@using Microsoft.AspNetCore.Routing
@using BusinessAsUsual.Web.Theming
@using BusinessAsUsual.Web.Components.Layout

<MudThemeProvider Theme="@CurrentTheme"
                  IsDarkMode="@IsDarkMode"
                  IsDarkModeChanged="@OnDarkModeChanged">

    <Router AppAssembly="@typeof(Program).Assembly">
        <Found Context="routeData">
            <RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)" />
        </Found>
        <NotFound>
            <MudText Color="Color.Error">Page not found.</MudText>
        </NotFound>
    </Router>
</MudThemeProvider>

@code {
    private bool IsDarkMode = true;

    private MudTheme CurrentTheme => IsDarkMode
        ? ThemeConfig.GetDarkTheme()
        : ThemeConfig.GetLightTheme();

    private Task OnDarkModeChanged(bool value)
    {
        IsDarkMode = value;
        return Task.CompletedTask;
    }
}