@inherits LayoutComponentBase
@using BusinessAsUsual.Web.Themes
@inject ThemeContext ThemeContext

<ThemeProviderWrapper />
<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />

<MudLayout>
    <!-- Top Bar -->
    <TopBar />

    <!-- Sidebar -->
    <MudDrawer @bind-Open="_sidebarOpen" Anchor="Anchor.Start" Elevation="1" Variant="DrawerVariant.Temporary">
        <Sidebar CurrentModule="@_currentModule" OnNavigate="HandleNavigate" />
    </MudDrawer>

    <!-- Main Content -->
    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.False" Class="pa-4">
            @Body
            <ThemeChooser />
        </MudContainer>
    </MudMainContent>

    <!-- Footer -->
    <Footer />
</MudLayout>

@code {
    private bool _sidebarOpen = false;
    private string _currentModule = "HR";

    private void HandleNavigate(string module)
    {
        _currentModule = module;
        _sidebarOpen = true;
    }
}