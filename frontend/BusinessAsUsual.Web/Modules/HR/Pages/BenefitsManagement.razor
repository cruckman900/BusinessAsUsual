@page "/hr/benefits"

@using BusinessAsUsual.Web.Modules.HR.Services
@using BusinessAsUsual.Web.Modules._Shared
@inherits HRLandingBase
@inject IHRService HRService
@inject PageHeaderService HeaderService

<MudGrid>
    @foreach (var benefit in _benefits)
    {
        <MudItem xs="12" sm="6" md="4">
            <MudCard>
                <MudCardContent>
                    <MudText Typo="Typo.h6">@benefit.Name</MudText>
                    <MudSwitch T="bool" @bind-Value="benefit.Enabled" Color="Color.Primary" />
                </MudCardContent>
            </MudCard>
        </MudItem>
    }
    </MudGrid>

@code {
    private IEnumerable<Benefit> _benefits = Enumerable.Empty<Benefit>();

    private RenderFragment HeaderContent =>@<PageHeader Title="Benefits"
            Description="Manage employee benefits and enrollment."
            Breadcrumbs="@(BuildBreadCrumbs("Benefits"))" />
    ;

    protected override async Task OnInitializedAsync()
    {
        _benefits = await HRService.GetBenefitsAsync();
        HeaderService.SetHeader(HeaderContent);
    }
}
