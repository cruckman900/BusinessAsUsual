@page "/"
@namespace BusinessAsUsual.Web.Components.Pages
@using BusinessAsUsual.Web.Services
@using MudBlazor

@inject NavigationManager Nav
@* @inject CompanySession Session *@

<MudText Typo="Typo.h3" Color="Color.Primary">
    Welcome to Business As Usual
</MudText>

<MudText Typo="Typo.subtitle1">
    Your modular, contributor-ready business suite starts here.
</MudText>

@code {
    private bool _redirected = false;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await Task.Yield(); // ✅ Ensures async execution is honored

        if (firstRender && !_redirected)
        {
            _redirected = true;

            var conn = ""; // Placeholder

            if (string.IsNullOrWhiteSpace(conn))
            {
                Nav.NavigateTo("/login", forceLoad: true);
            }
        }
    }
}