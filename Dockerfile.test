FROM mcr.microsoft.com/dotnet/sdk:9.0

WORKDIR /app
COPY . .
COPY BusinessAsUsual.Tests/TestConfig.runsettings /app/TestConfig.runsettings
RUN dotnet restore BusinessAsUsual.sln
RUN dotnet build BusinessAsUsual.sln --no-restore

USER root

RUN apt-get update && apt-get install -y iputils-ping

USER mssql